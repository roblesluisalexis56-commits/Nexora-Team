{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">📊 Ventas Registradas</h2>

<div class="mb-3">
  <h5>Total Ingresos: <span class="badge bg-success">${{ "%.2f"|format(total_ingresos) }}</span></h5>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered align-middle shadow">
    <thead class="table-dark">
      <tr>
        <th>Cliente</th>
        <th>Teléfono</th>
        <th>Email</th>
        <th>Pago</th>
        <th>Estado</th>
        <th>Servicio</th>
        <th>Cuenta</th>
        <th>Contraseña</th>
        <th>Dinero</th>
        <th>Inicio</th>
        <th>Fin</th>
        <th>Admin Pago</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for v in ventas %}
      <tr>
        <td>{{ v.nombre_cliente }}</td>
        <td>{{ v.numero_cliente }}</td>
        <td>{{ v.correo_cliente }}</td>
        <td>{{ v.medio_pago }}</td>
        <td>
          {% if v.estado_pago == "Hecho" %}
            <span class="badge bg-success">Hecho</span>
          {% else %}
            <span class="badge bg-warning text-dark">Pendiente</span>
          {% endif %}
        </td>
        <td>{{ v.servicio }}</td>
        <td>{{ v.cuenta_asociada }}</td>
        <td>{{ v.contraseña }}</td>
        <td>${{ "%.2f"|format(v.dinero) }}</td>
        <td>{{ v.fecha_inicio }}</td>
        <td>{{ v.fecha_fin }}</td>
        <td><span class="badge bg-info">{{ v.admin_pago }}</span></td>
        <td>
          <a href="{{ url_for('editar_venta', id=v.id) }}" class="btn btn-sm btn-warning">✏️ Editar</a>
          <form method="POST" action="{{ url_for('eliminar_venta', id=v.id) }}" style="display:inline;">
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('¿Eliminar registro?')">🗑️ Eliminar</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
